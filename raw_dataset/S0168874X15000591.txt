@&#MAIN-TITLE@&#Trimming line development method of auto panel part with undercutting flange

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A method used to unfold undercutting flanges in triangle mesh parameterization way.


                        
                        
                           
                           The 3D mesh smoothing method with sliding constraint surface used to improve mesh quality.


                        
                        
                           
                           A mesh generation method used to get a good initial solution for one-step inverse FEM.


                        
                        
                           
                           The method has applied to many industry auto-panel parts accurately and robustly.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Trimming line

Undercutting flange

One-step inverse FEM

Sliding constraint surface

@&#ABSTRACT@&#


                  In most of auto-panel manufacturing, trimming is generally performed before flanging. Therefore, the acquisition of the optimal trimming line is one of the keys to obtain an accurate shape of a product. It is not easy to obtain a reasonable trimming line for auto panel part with undercutting flange. Analytical models can only deal with some simple stretch and shrink flanging parts. Section-based method unfolds flange along part outer boundary by defining many section planes. This method may produce inaccurate results for large deformation regions. The incremental simulation based method can generate more accurate trimming line by iterative strategy. However, it is still not widely accepted in the auto-industry since limitation of time and lack of information in the initial die design stage. In this study, a novel fast method to find feasible trimming line is proposed. One-step inverse finite element method (FEM) is used to analyze the flanging process because the strain paths are simple in flanging. The most difficult task of one-step inverse FEM is the generation of initial guess mesh. Robust generation method of initial guess mesh is presented specially to handle the undercutting flange regions. The new geometry method develops the final 3D part mesh with undercutting flange in triangle mesh parameterization way onto the drawing tool surface. The 3D mesh smoothing method with sliding constraint surface technique is utilized to smooth mesh distortion or overstretching after development. Finally, the 3D trimming line is extracted from the outer boundary after one-step inverse FEM simulation. The present trimming line calculation method is successfully applied to the complex industrial applications such as decklid and front fender. This method shows many benefits since trimming line can be obtained in the early die design stage.
               

@&#INTRODUCTION@&#

Flanging is a very important sheet metal forming process for welding and assembly. The most of the sheet metal components are necessarily flanged after stamping process. For most of auto panel parts, it is flanging process after deep drawing and the drawing part will be trimmed along trimming line before flanging process. The prediction of the blank shape is one important factor that significantly influences the flanging formability and the forming precision. Therefore, to find the optimal trimming line is essential in obtaining precise product shape after flanging. During last several decades, many researchers have tried to make robust development technique from final product shape.

Wang and Wang analyzed two mathematical models of stretch and shrink flanging operations, respectively [1,2]. Asnafi studied vertical stretch and shrink flanging experimentally and theoretically [3]. Based on Wang’s models, Hu et al. proposed two modification analytical models for stretch and shrink flanging [4]. Li developed an analytical model for analysis of stretch flanging of V-shaped sheet metal [5]. However, these analytical models can only get the accurate trim-line profile for simply stretch and shrink flanging operations.

Most of auto panel designers usually use section-based tool of CAD software to design trimming line. In this method, designer generates tool profile and product profile by defining same section plane. Then, product profile is unfolded on the tool profile automatically by CAD tool and the length of production profile is fixed. The end point of unfolded product profile is defined as a trimming line point for this section. In order to get smooth trimming line, this process has to be repeated several hundred times along the product outer boundary. This method usually can obtain good result for the bending dominated part. However this method shows large deviation from real application for part with considerable deformation since it cannot consider section deformation.

In addition, some researchers have utilized incremental simulation code to get the optimal trimming line by several iterative steps [6,7]. This simulation-based method can generate more precise result than the previous one since it can consider contact history and deformation mechanism. However, due to lack of tool information, it is difficult to use this method in the early die design stage and it also needs a lot of time to simulate the flanging process.

The one-step inverse FEM based on total plastic theory has high simulation speed because there is only two degrees-of-freedom of each node. The most difficult task using one-step inverse FEM to calculate 3D trimming line is the generation of initial guess mesh, especially the undercutting flange. Many researchers have studied several methods of the initial solution for the one-step inverse FEM. In the early studies, the one-step inverse FEM is mainly used to find initial flat blank [8]. The classic geometric mapping methods are only based on geometric consideration, and could not manage complex industrial products [9]. The energy mapping algorithm with reverse deformation could get the good initial solution for the complicated deep drawing model with quasi-vertical walls [10]. Kim and Huh used the one-step inverse FEM to find the 3D intermediate configuration on arbitrary shaped surface [11]. Chung used a new development method to develop the 3D undercutting part in propagational way from final mesh onto the drawing tool surface [12]. But this method needs to remedy mesh distortion many times by the energy minimization technique during development process. Bao used a similar way as Chung to get the initial guess mesh and the mesh smoothing is needed to be improved [13].

In this article, the one-step inverse FEM is used to obtain the trimming line. Desired final product shape is considered as the final configuration of one-step inverse FEM. The initial curved blank on the drawing tool surface is calculated by the one-step inverse FEM. In order to deal with the undercutting flange regions, the robust generation method of initial guess mesh based on the triangle mesh parameterization way is presented to unfold the final product with undercutting flange onto the drawing tool surface. The mesh distortion and overstretching after development is smoothed by the 3D mesh smoothing method with sliding constraint surface technique. Trimming line is directly extracted from the outline of initial curved blank. The developed trimming lines are compared with that from the experimental results for decklid and front fender products.

The kinematic description of the one-step inverse FEM as that of Guo et al. [8] is used in this paper. Two main assumptions are adopted as follows: one is the proportional loading assumption which avoids the incremental integration of plasticity (deformation theory of plasticity); and the second assumption allows using simplified pressure friction forces instead of the contact conditions between tools and formed sheets. These assumptions lead to a total or direct method independent of the deformation history, so the one-step inverse FEM is very fast and does not need much memory space (only two degrees of freedom per node).

In the one-step inverse FEM for trimming line, only two configurations are considered: the initial curved blank and the final 3D workpiece as shown in 
                     Fig. 1. The total strain is calculated in one step by directly comparing the initial curved blank and the final 3D workpiece. Using the Kirchhoff assumption, the initial and final position vectors of a material point q can be expressed:
                        
                           (1)
                           
                              {
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   q
                                                
                                                
                                                   0
                                                
                                             
                                             =
                                             
                                                
                                                   x
                                                
                                                
                                                   p
                                                
                                             
                                             −
                                             
                                                
                                                   u
                                                
                                                
                                                   p
                                                
                                             
                                             +
                                             
                                                
                                                   z
                                                
                                                0
                                             
                                             
                                                
                                                   n
                                                
                                                0
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   q
                                                
                                             
                                             =
                                             
                                                
                                                   x
                                                
                                                
                                                   p
                                                
                                             
                                             +
                                             z
                                             n
                                          
                                       
                                    
                                 
                              
                           
                        
                     where 
                        u
                     
                     
                        p
                      is the displacement of the point p on the mid-surface of the sheet, 
                        n
                     
                     0 and 
                        n
                      are the normals of the mid-surface at p
                     0 and p. The deformation gradient tensor F
                     -1 can be calculated using Eq. (1), and then the left Cauchy Green deformation tensor B
                     −1=F
                     -T
                     F
                     −1.

The eigenvalue calculation of B
                     −1 gives two principal plane stretches λ
                     1, λ
                     2 and their direction transformation matrix [M]. Then the thickness stretch λ
                     3 is calculated by the incompressibility assumption. Finally, the logarithmic strains are obtained by [ε]=[M][lnλ][M]T.

Neglecting the transverse shear effects of the thin sheet, the element internal force vector in the global coordinates is obtained:
                        
                           (2)
                           
                              
                                 {
                                 
                                    
                                       
                                          F
                                       
                                       
                                          int
                                       
                                       
                                          e
                                       
                                    
                                 
                                 }
                              
                              =
                              
                                 
                                    [
                                    T
                                    ]
                                 
                                 T
                              
                              
                                 ∫
                                 
                                    
                                       
                                          V
                                       
                                       e
                                    
                                 
                              
                              
                                 
                                    (
                                    
                                       
                                          
                                             [
                                             
                                                
                                                   B
                                                
                                                
                                                   m
                                                
                                             
                                             ]
                                          
                                          T
                                       
                                       +
                                       z
                                       
                                          
                                             [
                                             
                                                
                                                   B
                                                
                                                
                                                   b
                                                
                                             
                                             ]
                                          
                                          T
                                       
                                    
                                    )
                                 
                                 
                                    {
                                    σ
                                    }
                                 
                                 d
                                 z
                                 d
                                 A
                              
                           
                        
                     where [B
                     
                        m
                     ] is membrane matrix and [B
                     
                        b
                     ] is bending matrix. These resultant forces can be obtained by numerical integration through the thickness at the element central using five or seven Gauss integration points.

In the one-step inverse FEM, the elastic-plastic deformation is assumed to be independent on the loading path and a total constitutive law is obtained,
                        
                           (3)
                           
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      σ
                                                   
                                                   
                                                      x
                                                      x
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      σ
                                                   
                                                   
                                                      y
                                                      y
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      σ
                                                   
                                                   
                                                      x
                                                      y
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ]
                              
                              =
                              
                                 
                                    2
                                    
                                       σ
                                       ¯
                                    
                                    (
                                    2
                                    +
                                    
                                       r
                                       ¯
                                    
                                    )
                                 
                                 
                                    3
                                    
                                       ε
                                       ¯
                                    
                                    (
                                    1
                                    +
                                    2
                                    
                                       r
                                       ¯
                                    
                                    )
                                 
                              
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                1
                                                +
                                                
                                                   r
                                                   ¯
                                                
                                             
                                          
                                          
                                             
                                                r
                                                ¯
                                             
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             
                                                r
                                                ¯
                                             
                                          
                                          
                                             
                                                1
                                                +
                                                
                                                   r
                                                   ¯
                                                
                                             
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             0
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 ]
                              
                              
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      x
                                                      x
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      y
                                                      y
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      x
                                                      y
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ]
                              
                           
                        
                     
                  

In the one-step inverse FEM, the tool actions are simply represented by some external forces at the final configuration neglecting continuous contact treatment since it does not consider the loading history. The blank holder’s action is replaced by an equivalent load vector due to the friction. The punch and die actions are replaced by a normal pressure force and a tangential friction force. The consideration of the tool actions will give the external force vector, leading to the following non-linear equilibrium system and the Newton–Raphson method is employed to solve the non-linear equations.
                        
                           (4)
                           
                              {
                              R
                              (
                              U
                              ,
                              V
                              )
                              }
                              =
                              
                                 
                                    ∑
                                    e
                                 
                                 
                                    (
                                    {
                                    
                                       
                                          F
                                       
                                       
                                          e
                                          x
                                          t
                                       
                                       
                                          e
                                       
                                    
                                    }
                                    −
                                    {
                                    
                                       
                                          F
                                       
                                       
                                          int
                                       
                                       
                                          e
                                       
                                    
                                    }
                                    )
                                    =
                                    0
                                 
                              
                           
                        
                     
                  

Initial solution is an essential issue to ensure the success of the non-linear resolution in the implicit static one-step inverse FEM. The Newton–Raphson method expressed by Eq. (4) is highly sensitive to the initial solution. So the initial guess mesh generation as the initial solution is an important task to speed up and guarantee the convergence of Newton–Raphson iteration. As mentioned before, Tang [10] suggested an energy mapping algorithm with reverse deformation to get the initial guess mesh for the 3D complicated work piece. But it can only develop the quasi-vertical walls and cannot unfold the undercutting flanges. Chung and Bao [12,13] develop the undercutting flanges by geometrical unfold method layer by layer. However it needs to smooth the mesh after each step and leads to low efficiency for the complicated undercutting flanges.

To overcome the development difficulty of undercutting flange, a new geometrical development method in triangle mesh parameterization way is proposed to unfold the undercutting flanges into the flat plane firstly. Second, the flat mesh is projected vertically onto the drawing tool surface. Third, the 3D mesh on the drawing tool surface as the initial guess mesh of one-step inverse FEM is only needed to be smoothed one time.

The new geometrical development method in triangle mesh parameterization way adopts the theory presented in literature [13]: utilizing geometric intrinsic properties of triangles to represent the shape of a triangle.

As in 
                     Fig. 2, considering a spatial triangle △p
                     1
                     p
                     
                        2
                     
                     p
                     3, α∈[−π, π] is the intersection angle from side p
                     1
                     p
                     2 to p
                     1
                     p
                     3, λ is the side ratio of p
                     1
                     p
                     2 and p
                     1
                     p
                     3.Obviously, α and λ are geometric intrinsic properties of triangle △p
                     1
                     p
                     2
                     p
                     3. A vector equation can be obtained:
                        
                           (5)
                           
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          1
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          3
                                       
                                    
                                 
                                 
                                    →
                                 
                              
                              =
                              λ
                              R
                              (
                              α
                              )
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          1
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          2
                                       
                                    
                                 
                                 
                                    →
                                 
                              
                           
                        
                     where 
                        R
                     (α) is the rotation matrix of α:
                        
                           
                              R
                              (
                              α
                              )
                              =
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                cos
                                                
                                                α
                                             
                                          
                                          
                                             
                                                −
                                                
                                                sin
                                                
                                                α
                                             
                                          
                                       
                                       
                                          
                                             
                                                sin
                                                
                                                α
                                             
                                          
                                          
                                             
                                                cos
                                                
                                                α
                                             
                                          
                                       
                                    
                                 
                                 ]
                              
                           
                        
                     
                     q
                     
                        i
                      (i=1,2,3) are nodes after development of triangle △p
                     1
                     p
                     2
                     p
                     3, assuming q
                     
                        i
                      (i=1,2,3)=(x
                     
                        i
                     , y
                     
                        i
                     ) and Eq. (5) can be described as
                        
                           (6)
                           
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                λ
                                                
                                                cos
                                                
                                                α
                                                −
                                                1
                                             
                                          
                                          
                                             
                                                −
                                                λ
                                                
                                                sin
                                                
                                                α
                                             
                                          
                                          
                                             
                                                −
                                                λ
                                                
                                                cos
                                                
                                                α
                                             
                                          
                                          
                                             
                                                λ
                                                
                                                sin
                                                
                                                α
                                             
                                          
                                          
                                             1
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             
                                                λ
                                                
                                                sin
                                                
                                                α
                                             
                                          
                                          
                                             
                                                λ
                                                
                                                cos
                                                
                                                α
                                                −
                                                1
                                             
                                          
                                          
                                             
                                                −
                                                λ
                                                
                                                sin
                                                
                                                α
                                             
                                          
                                          
                                             
                                                −
                                                λ
                                                
                                                cos
                                                
                                                α
                                             
                                          
                                          
                                             0
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 ]
                              
                              
                                 [
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      3
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      3
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ]
                              
                              =
                              
                                 [
                                 
                                    
                                       
                                          
                                             0
                                          
                                       
                                       
                                          
                                             0
                                          
                                       
                                    
                                 
                                 ]
                              
                           
                        
                     
                  

Every triangle of the spatial mesh has an equation like Eq. (6). So an equation set as following can be obtained by combining these equations.
                        
                           (7)
                           
                              [
                              A
                              ]
                              {
                              X
                              }
                              =
                              
                                 {
                                 0
                                 }
                              
                           
                        
                     where [A] is an m by n order sparse matrix (n is the number of nodes in the spatial mesh, m is the number of degrees of freedom for all nodes), {X} is the coordinate vector of the flat mesh nodes.

Since matrix [A] is not a square matrix, the equation set can only be solved in a least squares sense. For solving the equation set, some edge line nodes should be fixed, for example, the inner edge line nodes of the flange.

Assuming p
                     
                        i
                      (x
                     
                        i
                     
                     ⁎, y
                     
                        i
                     
                     ⁎) (i=1,2…,l) are nodes of the inner edge line, during flange development process, these nodes are fixed and the coordinates of these nodes keep unchanged, so
                        
                           (8)
                           
                              
                                 
                                    x
                                 
                                 
                                    i
                                    =
                                 
                              
                              
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 ⁎
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    i
                                    =
                                 
                              
                              
                                 
                                    
                                       y
                                    
                                    
                                       i
                                    
                                 
                                 ⁎
                              
                              (
                              i
                              =
                              1
                              ,
                              2
                              …
                              ,
                              l
                              )
                           
                        
                     
                  

Add Eq. (8) to equation set (7) to get a new equation set:
                        
                           (9)
                           
                              [
                              
                                 A
                                 ¯
                              
                              ]
                              
                                 {
                                 X
                                 }
                              
                              =
                              
                                 {
                                 b
                                 }
                              
                           
                        
                     where 
                        [
                        
                           A
                           ¯
                        
                        ]
                      is an m+l by n order sparse matrix, {b} is an m+l dimensional column vector.

After solving the least squares solution, equation set 
                        
                           {
                           X
                           }
                        
                        =
                        
                           
                              (
                              
                                 
                                    
                                       A
                                       ¯
                                    
                                 
                                 T
                              
                              
                                 A
                                 ¯
                              
                              )
                           
                           
                              −
                              1
                           
                        
                        
                           A
                           ¯
                        
                        b
                      is obtained. Since 
                        
                           
                              
                                 A
                                 
                                    ¯
                                 
                              
                           
                           T
                        
                        
                           A
                           
                              ¯
                           
                        
                      is a large sparse symmetric matrix, this linear equations can be quickly solved by the solution method of linear system, such as the LDLT direct algorithm or the SSOR-PCG iteration algorithm.

To explain this procedure more clearly, a simplified example is presented in 
                     Fig. 3. The flange represents the spatial triangle mesh of undercutting flange in auto panel part. The tool surface represents the drawing tool surface before flanging. The inner edge nodes of the flange will be fixed during the unfolding process. As shown in Fig. 3, all the undercutting flange mesh can be unfolded into the initial flat mesh by the triangle mesh parameterization calculation very quickly in one time.

The initial flat mesh will be projected onto the tool surface along forming direction. However, for most of the cases, the 3D projection mesh could become over-stretched or distorted. In 
                     Fig. 4, the 3D projection mesh on the tool surface has been overstretched. As a result, the 3D mesh smoothing algorithm is needed to improve the 3D projection mesh shape.

For improving the efficiency and accuracy of the algorithm, the sliding constraint surface technique is utilized in the 3D mesh smoothing method. During the mesh smoothing process, the projection mesh nodes can only be moved on the sliding constraint surface which is also the nodal tangent plane. In this way, the nonlinear equations iteration could be easily converged since the nodal contact treatment is simplified. 
                     Fig. 5 shows the sliding constraint surface of the 3D mesh smoothing method.

As shown in Fig. 5, the nodal coordinate system 
                        (
                        
                           x
                           ¯
                        
                        ,
                        
                           y
                           ¯
                        
                        ,
                        
                           z
                           ¯
                        
                        )
                      is defined on every node and Z-axis is just along the nodal normal direction. The element local coordinate system (s, t) is defined on each element. During the iteration process, the stiffness matrix 
                        [
                        
                           
                              k
                           
                           e
                        
                        ]
                      and nodal residual internal force 
                        {
                        
                           
                              F
                           
                           
                              int
                           
                           
                              e
                           
                        
                        }
                      in the element local coordinate system will be both transformed into the nodal coordinate system. The transformation relations are as follows:
                        
                           (10)
                           
                              
                                 
                                    
                                       
                                          {
                                          
                                             
                                                
                                                   
                                                      [
                                                      
                                                         
                                                            
                                                               k
                                                               ¯
                                                            
                                                         
                                                         e
                                                      
                                                      ]
                                                      =
                                                      
                                                         
                                                            [
                                                            T
                                                            ]
                                                         
                                                         T
                                                      
                                                      [
                                                      
                                                         
                                                            k
                                                         
                                                         e
                                                      
                                                      ]
                                                      [
                                                      T
                                                      ]
                                                   
                                                
                                                
                                                   
                                                      {
                                                      
                                                         
                                                            
                                                               F
                                                               ¯
                                                            
                                                         
                                                         
                                                            int
                                                         
                                                         
                                                            e
                                                         
                                                      
                                                      }
                                                      =
                                                      
                                                         
                                                            [
                                                            T
                                                            ]
                                                         
                                                         T
                                                      
                                                      {
                                                      
                                                         
                                                            F
                                                         
                                                         
                                                            int
                                                         
                                                         
                                                            e
                                                         
                                                      
                                                      }
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          [
                                          T
                                          ]
                                          =
                                          
                                             [
                                             
                                                
                                                   
                                                      
                                                         
                                                            [
                                                            
                                                               
                                                                  T
                                                               
                                                               
                                                                  1
                                                               
                                                            
                                                            ]
                                                         
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            [
                                                            
                                                               
                                                                  T
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                            ]
                                                         
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            [
                                                            
                                                               
                                                                  T
                                                               
                                                               
                                                                  3
                                                               
                                                            
                                                            ]
                                                         
                                                      
                                                   
                                                
                                             
                                             ]
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          [
                                          
                                             
                                                T
                                             
                                             
                                                i
                                             
                                          
                                          ]
                                          =
                                          
                                             [
                                             
                                                
                                                   
                                                      
                                                         
                                                            cos
                                                            (
                                                            
                                                               
                                                                  
                                                                     
                                                                        x
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                               
                                                                  ¯
                                                               
                                                            
                                                            ,
                                                            s
                                                            )
                                                         
                                                      
                                                      
                                                         
                                                            cos
                                                            (
                                                            
                                                               
                                                                  
                                                                     
                                                                        y
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                               
                                                                  ¯
                                                               
                                                            
                                                            ,
                                                            s
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            cos
                                                            (
                                                            
                                                               
                                                                  
                                                                     
                                                                        x
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                               
                                                                  ¯
                                                               
                                                            
                                                            ,
                                                            t
                                                            )
                                                         
                                                      
                                                      
                                                         
                                                            cos
                                                            (
                                                            
                                                               
                                                                  
                                                                     
                                                                        y
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                               
                                                                  ¯
                                                               
                                                            
                                                            ,
                                                            t
                                                            )
                                                         
                                                      
                                                   
                                                
                                             
                                             ]
                                          
                                       
                                    
                                 
                              
                           
                        
                     where 
                        [
                        
                           
                              
                                 k
                                 ¯
                              
                           
                           e
                        
                        ]
                      is the stiffness matrix and 
                        {
                        
                           
                              
                                 F
                                 ¯
                              
                           
                           
                              int
                           
                           
                              e
                           
                        
                        }
                      is the nodal internal force in the nodal coordinate system, the subscript i in 
                        [
                        
                           
                              T
                           
                           
                              i
                           
                        
                        ]
                      represents the node number of elements. Because the 3D mesh smoothing algorithm is based on linear-elastic reverse deformation finite element method, so the stiffness matrix 
                        [
                        
                           
                              k
                           
                           e
                        
                        ]
                     in the element local coordinate system can be described as
                        
                           (11)
                           
                              [
                              
                                 
                                    k
                                 
                                 e
                              
                              ]
                              =
                              
                                 
                                    
                                       ∫
                                       
                                          
                                             
                                                v
                                             
                                             e
                                          
                                       
                                    
                                    
                                       [
                                       B
                                       ]
                                    
                                 
                                 T
                              
                              [
                              D
                              ]
                              [
                              B
                              ]
                              d
                              v
                              =
                              
                                 
                                    [
                                    B
                                    ]
                                 
                                 T
                              
                              [
                              D
                              ]
                              [
                              B
                              ]
                              δ
                              A
                           
                        
                     where [B] is the strain matrix, [D] is the elastic matrix, δ is the element thickness, and A is the element area.

The nodal residual internal force 
                        {
                        
                           
                              F
                           
                           
                              int
                           
                           
                              e
                           
                        
                        }
                      in the element local coordinate system is
                        
                           (12)
                           
                              {
                              
                                 
                                    F
                                 
                                 
                                    int
                                 
                                 
                                    e
                                 
                              
                              }
                              =
                              
                                 
                                    [
                                    T
                                    ]
                                 
                                 T
                              
                              
                                 
                                    
                                       ∫
                                       
                                          
                                             
                                                v
                                             
                                             e
                                          
                                       
                                    
                                    
                                       [
                                       B
                                       ]
                                    
                                 
                                 T
                              
                              [
                              D
                              ]
                              [
                              B
                              ]
                              {
                              
                                 
                                    q
                                 
                                 e
                              
                              }
                              d
                              v
                           
                        
                     where {q
                     
                        e
                     } is the nodal displacement vector in the element local coordinate system.

The iteration procedure utilizing Newton iterative method is as follows:
                        
                           (13)
                           
                              {
                              
                                 
                                    
                                       
                                          [
                                          
                                             
                                                K
                                             
                                             i
                                          
                                          ]
                                          {
                                          Δ
                                          
                                             
                                                u
                                             
                                             i
                                          
                                          }
                                          =
                                          {
                                          
                                             
                                                F
                                             
                                             
                                                int
                                             
                                          
                                          (
                                          
                                             
                                                u
                                             
                                             i
                                          
                                          )
                                          }
                                       
                                    
                                    
                                       
                                          {
                                          
                                             
                                                u
                                             
                                             
                                                i
                                                +
                                                1
                                             
                                          
                                          }
                                          =
                                          {
                                          
                                             
                                                u
                                             
                                             i
                                          
                                          }
                                          +
                                          w
                                          {
                                          Δ
                                          
                                             
                                                u
                                             
                                             i
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        
                     where 
                        w
                     is the relaxation factor, and 
                        {
                        Δ
                        
                           
                              u
                           
                           i
                        
                        }
                      is the displacement increment at iterative step i.

The iteration will be accomplished when the nodal residual internal force 
                        {
                        
                           
                              F
                           
                           
                              int
                           
                        
                        }
                      satisfies the pre-specified convergence condition.


                     
                     Fig. 6 shows the comparison between mesh before and after the 3D mesh smoothing. As shown in Fig. 6, the mesh aspect ratio after the 3D mesh smoothing is obviously improved and the mesh size is more closed to the original spatial mesh. It is clearly that the mesh smoothing method could improve mesh distorting and overstretching efficiently.

Then the above 3D smoothing mesh is used as the initial guess mesh of one-step inverse FEM. The exact part shape before flanging can be obtained after one-step inverse FEM calculation. Finally the trimming line is extracted easily from the part outline before flanging. The engineers could export this trimming line to CAD system for die design in IGS file format.

The present algorithm described above has been implemented in the commercial finite element code, DynaForm/MSTEP, and applied to many industry cases of sheet metal forming. In this paper, two typical auto-panel parts with undercutting flange are presented in order to confirm its validity in obtaining the trimming line.

As shown in 
                     Fig. 7, decklid is a typical auto panel part with undercutting flange around its outer edge. To reduce the amount of calculation, only the flange part is simulated here. Those nodes along the inner edge line of the flange part are applied in the fixed displacement constraints. The material name is M1A367-A12_Coated and the material properties are listed on 
                     Table 1.

The finite element model of trimming line is shown in 
                     Fig. 8, where the total number of finite elements is 32,202, the total number of nodes is 32,002. First, the spatial mesh of the decklid flange is unfolded into the initial flat mesh by the triangle mesh parameterization method. Then the initial flat mesh is projected vertically onto the drawing tool surface as shown in 
                     Fig. 9. Third, the 3D smoothed projection mesh is used as the initial guess mesh of the one-step inverse FEM by the 3D mesh smoothing method. Finally, the trimming line can be obtained by the one-step inverse FEM.


                     
                     Fig. 10 shows the comparison among the trimming lines obtained by the proposed method, geometrical unfold method layer by layer, AutoForm-Trim method and the real experiment one by many try-errors. AutoForm-Trim method is one module of AutoForm commercial software based on the AutoForm-Incremental solver to determine a blank outline or a trimming line [14]. To obtain a trimming line using this method must simulate all necessary forming operations first, such as drawing, cutting and flanging, and all die model of these operations is needed. After each whole simulation, the trimming line is modified automatically until the deviation has satisfied the requirement. Therefore, the result of this method is very accurate but not efficient and is still not widely accepted in the auto-industry since limitation of time and lack of information in the initial die design stage. As shown in Fig. 10, the trimming line obtained by AutoForm-Trim is the closest with the experiment result since it is simulated by the incremental finite element method based on the whole die model in iterative strategy. 
                     Table 2 shows the approximate time and the tool models needed by each method. The computers used by the three simulation methods have the same configuration, of which the CPU Clock Speed computers is 3.3GHz and RAM is 8GB. As shown in Table 2, AutoForm-Trim method need much more time and die information than the proposed method and the geometrical unfold method layer by layer. The most efficient method is the proposed one because the geometrical unfold method needs to remedy mesh distortion many times while this proposed method only needs one time.

However, the difference among the four results is still very small in most places except some slight deviation in length in large deforming area. In Fig. 10(b), points are picked out every 2mm along each trimming line to make the comparison more quantitatively. And 
                     Fig. 11 shows the flanging heights of these points respectively. As in Fig. 11, the heights of three simulation results are all a little higher than the experiment one and the maximum height difference is on the circular arc while the minimum is on the straight line. 
                     Table 3 shows the specific values of maximum and minimum difference between simulation result and experiment one. Synthesizing both accuracy and efficiency, the proposed method has an obvious advantage.

The one-step inverse FEM ignores the contact conditions between tools and sheets, so the friction force cannot be considered correctly in one-step inverse FEM. It is the reason that the elongation of simulation is larger than the experiment one. And the greater the deformation, the bigger the error is.

As another example, the trimming line of front fender is presented here. In 
                     Fig. 12, the front fender is a very complex part since it has many serious undercutting flanges, and the trimming line is much more difficult to be obtained than the previous example decklid. The material name is M1A367-A22 and the material properties are listed on 
                     Table 4.

The front fender flange’s development process also has three steps as mentioned before. And the nodes along the inner edge of the front fender flange are fixed during the unfolding process too. As shown in 
                     Fig. 13, the initial flat mesh of the front fender flange is got firstly in triangle mesh parameterization way. Then the initial flat mesh is projected along forming direction on the drawing die surface and smoothed by the 3D mesh smoothing method. The final 3D trimming line of front fender is achieved by the one-step inverse FEM in very short time.

As shown in 
                     Fig. 14, for both region-(1) and region-(2), the most accurate method is still the AutoForm-Trim method. The accuracy of the proposed method is a little worse but still very closely with the experiment one. However, its efficiency is the best and far better than AutoForm-Trim. 
                     Fig. 15 and 
                     Fig. 16 show the flanging heights of points picked out in region-(1) and region-(2) of Fig. 14, respectively. 
                     Table 5 shows the approximate time and the tool models needed by the three simulation methods. The time used by AutoForm-Trim method is about 40 times larger than the proposed one while the geometrical unfold method is about 5 times. In Fig. 14(b) and (c), points are picked out every 3mm along each trimming line. 
                     
                     Tables 6 and 7 respectively show the specific values of maximum and minimum difference between simulation and experiment results. As shown in Tables 6 and 7, the deviations are small and acceptable.

From the two examples above, it is obviously that the above-mentioned trimming line development method is efficient and accurate. Moreover, it can be used without flanging die model. This method can develop the part flanges especially the undercutting regions quickly and conveniently. However there are some deviations where the sheet produces large deformation during the flanging process since the one-step inverse FEM cannot consider the friction influence precisely.

@&#CONCLUSION@&#

A new method for trimming line development of auto panel parts with undercutting flange is presented. The robust initial guess mesh generation method based on the triangle mesh parameterization can unfold all the undercutting flange mesh onto the tool surface in one time. The 3D mesh smoothing with sliding constraint surface can remedy the over-stretched or distorted status for the 3D projection mesh effectively.So this initial guess mesh generation have higher solution speed in comparison with the traditional propagational way. Therefore, this new development method based on one-step inverse FEM can easily obtain the 3D trimming line for the auto panel part with undercutting flange in the early die design stage. The comparisons between simulation and experiment results of two complex auto panel parts (decklid and front fender) demonstrate that this development method have enough accuracy and efficiency. Therefore, the method could be used widely in auto-industry to shorten production period of trimming die and save cost.

@&#ACKNOWLEDGMENTS@&#

The authors are grateful to the support of the NUAA Fundamental Research Funds (Grant No. NS2013054).

@&#REFERENCES@&#

